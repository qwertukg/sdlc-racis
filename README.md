# Матрица вовлеченности 

|    |  Проектирование ---> |  Кодинг ---> |  Тестирование ---> |  Доставка |
|---|---|---|---|---|
| Менеджмент   |   |   |   |[Release](#release)<sup>A</sup>   |
| Архитекторы   | [HLD](#hld)<sup>RAS</sup>  |   |   |   |
|  Тимлиды      | [LLD](#lld)<sup>RAS</sup>  |[Documentation](#doc)<sup>AS</sup> [Unit tests](#unit)<sup>AS</sup> [Code](#code)<sup>AS</sup> |    |   |
|  Разработчики |   |[Documentation](#doc)<sup>R</sup> [Unit tests](#unit)<sup>R</sup> [Code](#code)<sup>R</sup>  |[Auto tests](#auto)<sup>S</sup>   |[Release](#release)<sup>R</sup>   |
|  QA           |   |   |[Auto tests](#auto)<sup>RA</sup>   |   |
|  DevOps       |   |[Code](#code)<sup>S</sup>   |[Auto tests](#auto)<sup>S</sup>   |[Release](#release)<sup>S</sup>   |
|  AppSec       |   |[LLD](#lld)<sup>S</sup>     |[Security Testing](#sectest)<sup>RAC</sup> |    |   

---
- **R** – Responsible (исполняет)
- **A** – Accountable (несет ответственность)
- **C** – Consult before doing (консультирует до исполнения)
- **I** – Inform after doing (оповещается после исполнения)
- **S** – supported (оказывает поддержку)
---

## Проектирование

### <a name="hld"></a> High-level design (Верхнеуровневый дизайн)

Верхнеуровневый дизайн (HLD) объясняет архитектуру необходимую для программного продукта, 
с указанием всех необходимых компонентов, и их интерфейсов, которые должны быть разработаны.

**Требования к HLD:**
- Описание логики взаимодействия с другими сервисами компании
- Описание контрактов на данные для всех интерфейсов, включая другие сервисы компании
- Интеграционная (архитектурная) диаграмма

**Архитектор** — Создает HLD, несет ответственность, и поддерживает его в течении всего проекта.

**Тимлид** — Консультирует и оказывает поддержку Архитектору на этапе создания HLD.

### <a name="lld"></a> Lo-level design (Дизайн кода)
Lo-level design (LLD) описывает логический и функциональный дизайн приложения, где проектируются фактические программные компоненты.
На этом этапе формируются структур данных, архитектура и дизайн микро сервисов, наборы используемых технологий.

**Требования к LLD:**
- Схема и описание взаимодействия микро сервисов (как микро сервисы взаимодействуют между собой и другими системами)
- Описание дизайна микро сервисов (описание сервис леера приложения)

**Тимлид** — Создает LLD, несет ответственность, и поддерживает его в течении всего проекта.

**Архитектор** — Консультирует и оказывает поддержку Тимлиду на этапе создания LLD.

**AppSec** - Консультирует по вопросам ИБ на этапе создания LLD.

## Кодинг

### <a name="lld"></a> Документация

Документация включает в себя как доки по коду (методы с логикой), 
так и поддержку LLD и HLD в актуальном состоянии.
А также сопутствующую документацию связанных систем

**Требования к документации:**
- наличие HLD и LLD
- инструкция по запуску и настройке приложения (системы)
- Инструкция администратора системы 
  (как поддерживать систему - необходима для сдачи в эксплуатацию)
- Инструкция для разработчика 
  (должна дать понять новому/заменяющему инженеру как и где расширять/править приложение)
- API должен быть описан в [Swagger hub](http://swagger-hub.k8s-dev.kar-tel.local)

**Тимлид** — Несет ответственность за поддержку документации в актуальном состоянии, 
в течении всего проекта. А также оказывает поддержку разработчикам при ее написании.

**Разработчик** — Пишет документацию в соответствии с требованиями,
по мере написания кода.

### <a name="unit"></a> Юнит тесты (Unit tests)

Тестирование атомарных участков кода содержащих логику, на ошибки программы (кода). 
Запускается при сборке приложения. Позволяют быстро проверить 
не привело ли очередное изменение кода к появлению ошибок в уже оттестированных местах программы.
Эти тесты охватывают нижнюю часть пирамиды тестирования.

**Требования к Юнит тестам:**
- Покрытие должно отображаться в [SonarQube](https://sonar.kar-tel.local)
- Покрытие должно соответствовать заявленным [Quality gates](https://sonar.kar-tel.local/quality_gates) 
- Библиотеки содержащие юнит тесты должны быть предоставлены Сонару. 

**Тимлид** — Несет ответственность покрытие логики, и оказывает поддержку разработчикам при их написании.

**Разработчик** — Покрывает код юнит тестами в соответствии с требованиями.

### <a name="code"></a> Код

Это код...

**Требования к коду:**
- В Докер контейнере
- Наличие Юнит тестов
- Процесс в контейнере не должен запускаться от root пользователя 
- Healthcheck не должен реагировать на зависимости и зависеть от пула коннектов основного процесса, как вариант развернуть отдельный ендпоинт. 
- Логирование в stdout. Желательно в json. 
- Поддержка масштабирования приложения, работа в нескольких репликах. Иначе отказоустойчивость не гарантирована.  
- Пароли должны передаваться через переменные-секреты, не хардкодиться. В идеале через vault который администрирует безопасность. 
- Не использовать локальные диски или монтируемые папки с других хостов. 
- Сессии не должны хранится в памяти процесса
- И тут еще много всего ... 

**Тимлид** — Несет ответственность за слияние кода написанного разработчиками, 
с рабочей веткой. А также помогает разработчиками при написании кода.

**Разработчик** — Пишет код в соответствии с HLD, LLD и другими требованиями.

**DevOps инженер** — Осуществляет поддержку работоспособности окружения (dev) и инструментария, на этапе разработки.


## Тестирование

### <a name="auto"></a> Авто тесты (QA automation)

QA automation — это контроль качества в процессе разработки программного обеспечения, 
использующий программные средства для выполнения тестов и проверки результатов выполнения, 
что помогает сократить время тестирования и упростить его процесс. 
Эти тесты охватывают верхнюю часть пирамиды тестирования.

**Требования к Авто тестам:**
- Запускаемость из пайплайна (как темплейт гитлаба)
- В Докер контейнере
- Поднимать с собой необходимое окружение

**QA инженер** — Пишет автоматизированные тесты (на ресты, UI, и прочие интерфейсы)
и несет ответсвенность за поддержание их в актуальном состоянии.

**Разработчик** — Оказывает поддержку QA инженеру по коду, при написании Авто тестов.

**DevOps инженер** — Осуществляет поддержку работоспособности окружения (test) и инструментария, на запуске Авто тестов.

### <a name="sectest"></a> Тесты безопасности

Тесты безопасности - состоят из двух частично автоматизированных этапов: SAST (анализ выдачи + дополнительная проверка ошибок логики, которые не могут быть пойманы анализатором), DAST (пентест на уровне поднятого тестового окружения, которое должно максимально совпадать с боевым).

## Доставка

### <a name="release"></a> Release

Доставка кода в прод...

**Требования к релизу:**
- Наличие HLD и LLD (или соответствующих изменений в них)
- Успешное пройденые Юнит и Приемочные тесты
- Что-то тут должно быть еще...

**Менеджер (какой?)** — Подтверждает готовность релиза к доставке 
(успешность тестов, соответствие критериям приемки).

**Тимлид** — Выполняет слияние рабочей ветки с мастером.

**DevOps инженер** — Осуществляет поддержку работоспособности окружения (prod) 
и инструментария, на этапе доставки/эксплуатирования в проде.

